const Attribute={data:()=>({user:null,curSelectedCnt:20,curSelectedBook:1,books:[],searchInput:null,searchRes:null,curPlan:"",cnts:[5,10,15,20,25,30,50]}),methods:{doSearch(){let e=this;this.searchRes=null,null!==this.searchInput&&""!=this.searchInput.trim()&&(/^[a-zA-Z]+$/.test(this.searchInput)?$.post("/query/en",{word:e.searchInput},function(t){e.searchRes=JSON.parse(t.data),$("#myModal").modal()}):$.post("/query/zh",{mean:e.searchInput,limit:5},function(t){e.searchRes=JSON.parse(t.data),$("#myModal").modal()}))},open(e){this.curSelectedBook=e},playAudio(e){let t=$("#wordAudio")[0];1==e?(t.src=this.curSpeech.uk,t.load(),t.play()):2==e?(t.src=this.curSpeech.us,t.load(),t.play()):3==e&&(t.src="https://dict.youdao.com/dictvoice?word="+this.searchRes.word+"&type=1",t.load(),t.play())},updateBook(){let e=this;$.post("/book/updateBook",{userid:e.user.id,dictID:e.curSelectedBook,studyWord:e.curSelectedCnt},function(t){200==t.code?(bs4pop.notice(t.data,{position:"topcenter",type:"success"}),$("#myModal1").modal("hide"),e.getCurPlan()):bs4pop.notice(t.msg,{position:"topcenter",type:"warning"})})},logout(){$.get("api/logout",function(e){1==e&&(localStorage.removeItem("user"),$(location).attr("href","/"))})},getCurPlan(){let e=this;$.post("/book/getPlans",{userid:e.user.id},function(t){200==t.code&&(e.curPlan=t.data)})},getStatus(){let e=this;$.post("/book/getBooks",{},function(t){if(200==t.code){e.books=t.data;for(let t=0;t<e.books.length;t++)e.books[t].imgUrl="/images/book/book"+e.books[t].dictID+".png"}else bs4pop.notice(t.msg,{position:"topcenter",type:"warning"})})}},computed:{searchWordExchange(){let e=this.searchRes.exchange.split("/"),t="";for(let o=0;o<e.length;o++)e[o]=e[o].replace(/p:/,"过去式："),e[o]=e[o].replace(/d:/,"过去分词："),e[o]=e[o].replace(/i:/,"现在分词："),e[o]=e[o].replace(/3:/,"第三人称单数："),e[o]=e[o].replace(/r:/,"形容词比较级："),e[o]=e[o].replace(/t:/,"形容词最高级："),e[o]=e[o].replace(/s:/,"名词复数形式："),t+=e[o];return t},curSpeech(){if(0==this.words.length)return;let e=this.words[this.curIndex],t="https://dict.youdao.com/dictvoice?word=";return{uk:t+e.ukspeech,us:t+e.usspeech}}},created(){let e=localStorage.getItem("user");this.user=JSON.parse(e),this.getStatus(),this.getCurPlan()}};Vue.createApp(Attribute).mount("#app");let handler=setInterval(function(){$.get("api/isLogin",function(e){!0!==e.data&&(clearInterval(handler),alert("您的账号已经在别处登录！"),$(location).attr("href","/"))})},3e3);