const Attribute={data:()=>({user:null,username:null,searchInput:null,searchRes:null,status:{learnCount:0,reviewCount:0},cnts:[5,10,15,20,25,30,50]}),methods:{doSearch(){let e=this;this.searchRes=null,null!==this.searchInput&&""!=this.searchInput.trim()&&(/^[a-zA-Z]+$/.test(this.searchInput)?$.post("/query/en",{word:e.searchInput},function(t){e.searchRes=JSON.parse(t.data),$("#myModal").modal()}):$.post("/query/zh",{mean:e.searchInput,limit:5},function(t){e.searchRes=JSON.parse(t.data),$("#myModal").modal()}))},logout(){$.get("api/logout",function(e){1==e&&(localStorage.removeItem("user"),$(location).attr("href","/"))})},Confirm(){let e=this;$.post("/setting/updateInfo",{userid:e.user.id,username:e.username,studyword:e.status.learnCount,reviewCnt:e.status.reviewCount},function(t){200==t.code?(e.user.nickName=e.username,localStorage.setItem("user",JSON.stringify(e.user)),bs4pop.notice(t.data,{position:"topcenter",type:"success"})):bs4pop.notice(t.msg,{position:"topcenter",type:"warning"})})},playAudio(e){let t=$("#wordAudio")[0];1==e?(t.src=this.curSpeech.uk,t.load(),t.play()):2==e?(t.src=this.curSpeech.us,t.load(),t.play()):3==e&&(t.src="https://dict.youdao.com/dictvoice?word="+this.searchRes.word+"&type=1",t.load(),t.play())},getStatus(){let e=this;$.post("/setting/getStatus",{userid:e.user.id},function(t){if(200==t.code){let s=t.data;e.status=s}else bs4pop.notice(t.msg,{position:"topcenter",type:"warning"})})}},computed:{searchWordExchange(){let e=this.searchRes.exchange.split("/"),t="";for(let s=0;s<e.length;s++)e[s]=e[s].replace(/p:/,"过去式："),e[s]=e[s].replace(/d:/,"过去分词："),e[s]=e[s].replace(/i:/,"现在分词："),e[s]=e[s].replace(/3:/,"第三人称单数："),e[s]=e[s].replace(/r:/,"形容词比较级："),e[s]=e[s].replace(/t:/,"形容词最高级："),e[s]=e[s].replace(/s:/,"名词复数形式："),t+=e[s];return t},curSpeech(){if(0==this.words.length)return;let e=this.words[this.curIndex],t="https://dict.youdao.com/dictvoice?word=";return{uk:t+e.ukspeech,us:t+e.usspeech}}},created(){let e=localStorage.getItem("user");this.user=JSON.parse(e),this.username=this.user.nickName,this.getStatus()}};Vue.createApp(Attribute).mount("#app");let handler=setInterval(function(){$.get("api/isLogin",function(e){!0!==e.data&&(clearInterval(handler),alert("您的账号已经在别处登录！"),$(location).attr("href","/"))})},3e3);