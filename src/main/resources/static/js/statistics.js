const AttributeBinding={data:()=>({user:null,searchInput:null,searchRes:null,isRenderCharts:!1,curSelected:7,datas:{}}),methods:{logout(){$.get("api/logout",function(t){1==t&&(localStorage.removeItem("user"),$(location).attr("href","/"))})},getStatistic(t){this.isRenderCharts=!1,this.datas.days=t,this.datas.userid=this.user.id,this.curSelected=t;let e=this;setTimeout(function(){e.isRenderCharts=!0},200)},doSearch(){let t=this;this.searchRes=null,null!==this.searchInput&&""!=this.searchInput.trim()&&(/^[a-zA-Z]+$/.test(this.searchInput)?$.post("/query/en",{word:t.searchInput},function(e){t.searchRes=JSON.parse(e.data),$("#myModal").modal()}):$.post("/query/zh",{mean:t.searchInput,limit:5},function(e){t.searchRes=JSON.parse(e.data),$("#myModal").modal()}))},playAudio(t){let e=$("#wordAudio")[0];1==t?(e.src=this.curSpeech.uk,e.load(),e.play()):2==t?(e.src=this.curSpeech.us,e.load(),e.play()):3==t&&(e.src="https://dict.youdao.com/dictvoice?word="+this.searchRes.word+"&type=1",e.load(),e.play())},load(){this.getStatistic(7)}},computed:{searchWordExchange(){let t=this.searchRes.exchange.split("/"),e="";for(let a=0;a<t.length;a++)t[a]=t[a].replace(/p:/,"过去式："),t[a]=t[a].replace(/d:/,"过去分词："),t[a]=t[a].replace(/i:/,"现在分词："),t[a]=t[a].replace(/3:/,"第三人称单数："),t[a]=t[a].replace(/r:/,"形容词比较级："),t[a]=t[a].replace(/t:/,"形容词最高级："),t[a]=t[a].replace(/s:/,"名词复数形式："),e+=t[a];return e},curSpeech(){let t=this.words[this.curIndex],e="https://dict.youdao.com/dictvoice?word=";return{uk:e+t.ukspeech,us:e+t.usspeech}}},created(){let t=localStorage.getItem("user");this.user=JSON.parse(t),this.load()}},app=Vue.createApp(AttributeBinding);app.component("charts",{props:["datas"],template:'\n        <div id="main"></div>\n        ',mounted(){this.myChart=echarts.init(document.getElementById("main"));let t=this;$.post("/statistic/getRecentData",{userid:t.datas.userid,days:t.datas.days},function(e){t.myChart.setOption({color:["#28a745","#FF6347"],series:[{name:"统计",type:"pie",radius:"55%",label:{normal:{show:!0,textStyle:{fontSize:18},formatter:"{b}: {c} ({d}%)"}},data:e.data}]})})}}),app.mount("#app");let handler=setInterval(function(){$.get("api/isLogin",function(t){!0!==t.data&&(clearInterval(handler),alert("您的账号已经在别处登录！"),$(location).attr("href","/"))})},3e3);