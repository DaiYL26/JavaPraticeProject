const AttributeBinding={data:()=>({user:null,words:[],curIndex:0,searchInput:null,searchRes:null,isPlay:!0,timer:"",delay:5e3,status:status}),methods:{doSearch(){let e=this;this.searchRes=null,null!==this.searchInput&&""!=this.searchInput.trim()&&(/^[a-zA-Z]+$/.test(this.searchInput)?$.post("/query/en",{word:e.searchInput},function(t){e.searchRes=JSON.parse(t.data),$("#myModal").modal()}):$.post("/query/zh",{mean:e.searchInput,limit:5},function(t){e.searchRes=JSON.parse(t.data),$("#myModal").modal()}))},logout(){$.get("api/logout",function(e){1==e&&(localStorage.removeItem("user"),$(location).attr("href","/"))})},setDelay(e){this.delay=1e3*e},startSildes(e){let t=this;e?(this.isPlay=!1,clearInterval(this.timer),$("#btnDelay").attr("disabled",!1)):(this.timer=setInterval(function(){t.curIndex++,10==t.curIndex&&(t.words=[],t.curIndex=0,t.getWords(t.user.id,10))},t.delay),this.isPlay=!0,$("#btnDelay").attr("disabled",!0))},playAudio(e){let t=$("#wordAudio")[0];1==e?(t.src=this.curSpeech.uk,t.load(),t.play()):2==e?(t.src=this.curSpeech.us,t.load(),t.play()):3==e&&(t.src="https://dict.youdao.com/dictvoice?word="+this.searchRes.word+"&type=1",t.load(),t.play())},getWords(e,t){let r=this;$.post("/home/getSlides",{userid:e,count:t},function(e){if(200==e.code){for(let t=0;t<e.data.length;t++){let s=JSON.parse(e.data[t]);r.words.push(s)}""==r.timer&&r.startSildes(!1)}})},load(){this.getWords(this.user.id,10)}},computed:{curWord(){return 0==this.words.length?{word:"",remMethod:{val:""},sentences:[],comm:[]}:this.words[this.curIndex]},searchWordExchange(){let e=this.searchRes.exchange.split("/"),t="";for(let r=0;r<e.length;r++)e[r]=e[r].replace(/p:/,"过去式："),e[r]=e[r].replace(/d:/,"过去分词："),e[r]=e[r].replace(/i:/,"现在分词："),e[r]=e[r].replace(/3:/,"第三人称单数："),e[r]=e[r].replace(/r:/,"形容词比较级："),e[r]=e[r].replace(/t:/,"形容词最高级："),e[r]=e[r].replace(/s:/,"名词复数形式："),t+=e[r];return t},curSpeech(){if(0==this.words.length)return;let e=this.words[this.curIndex],t="https://dict.youdao.com/dictvoice?word=";return{uk:t+e.ukspeech,us:t+e.usspeech}}},created(){let e=localStorage.getItem("user");this.user=JSON.parse(e),this.load()}};Vue.createApp(AttributeBinding).mount("#app");let handler=setInterval(function(){$.get("api/isLogin",function(e){!0!==e.data&&(clearInterval(handler),alert("您的账号已经在别处登录！"),$(location).attr("href","/"))})},3e3);